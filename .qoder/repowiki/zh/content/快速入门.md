# 快速入门

<cite>
**本文档中引用的文件**
- [README.md](file://README.md)
- [packages/weapp-tailwindcss/package.json](file://packages/weapp-tailwindcss/package.json)
- [packages/init/src/index.ts](file://packages/init/src/index.ts)
- [demo/taro-app/package.json](file://demo/taro-app/package.json)
- [demo/uni-app/package.json](file://demo/uni-app/package.json)
- [demo/native/package.json](file://demo/native/package.json)
- [templates/taro-vite-tailwindcss-v4/package.json](file://templates/taro-vite-tailwindcss-v4/package.json)
- [templates/uni-app-tailwindcss-v4/package.json](file://templates/uni-app-tailwindcss-v4/package.json)
- [demo/taro-app/tailwind.config.js](file://demo/taro-app/tailwind.config.js)
- [demo/uni-app/tailwind.config.js](file://demo/uni-app/tailwind.config.js)
- [demo/native/app.json](file://demo/native/app.json)
- [demo/native/pages/index/index.wxml](file://demo/native/pages/index/index.wxml)
</cite>

## 目录
1. [简介](#简介)
2. [安装 CLI 工具](#安装-cli-工具)
3. [初始化项目](#初始化项目)
4. [框架与构建工具配置](#框架与构建工具配置)
5. [Hello World 示例](#hello-world-示例)
6. [配置文件设置](#配置文件设置)
7. [常见问题解决方案](#常见问题解决方案)
8. [总结](#总结)

## 简介

`weapp-tailwindcss` 是一个为小程序开发者提供的 Tailwind CSS 全面解决方案，支持 Taro、uni-app、原生小程序等多种框架。本指南将帮助您在5分钟内完成项目设置，快速开始使用 Tailwind CSS 开发小程序。

**本文档来源**
- [README.md](file://README.md#L1-L101)

## 安装 CLI 工具

您可以使用 npm、yarn 或 pnpm 安装 `weapp-tailwindcss` CLI 工具：

```bash
# 使用 npm
npm install -g weapp-tailwindcss

# 使用 yarn
yarn global add weapp-tailwindcss

# 使用 pnpm
pnpm add -g weapp-tailwindcss
```

安装完成后，您将获得 `weapp-tailwindcss`、`weapp-tw` 和 `weapp-tailwindcss-webpack-plugin` 三个命令行工具。

**本文档来源**
- [packages/weapp-tailwindcss/package.json](file://packages/weapp-tailwindcss/package.json#L142-L146)
- [README.md](file://README.md#L65)

## 初始化项目

使用 `weapp-tailwindcss init` 命令可以快速初始化项目。该命令会自动创建必要的配置文件并更新 `package.json`。

```bash
# 在项目根目录执行
weapp-tailwindcss init
```

此命令会执行以下操作：
1. 检查 `package.json` 文件是否存在
2. 添加 `weapp-tailwindcss` 到开发依赖
3. 创建 `postcss.config.js` 配置文件
4. 创建 `tailwind.config.js` 配置文件
5. 添加 `postinstall` 脚本以确保每次安装后自动处理

**本文档来源**
- [packages/init/src/index.ts](file://packages/init/src/index.ts#L91-L107)
- [packages/weapp-tailwindcss/package.json](file://packages/weapp-tailwindcss/package.json#L182)

## 框架与构建工具配置

### Taro 框架配置

对于 Taro 项目，您需要在 `package.json` 中添加相应的依赖和脚本：

```json
{
  "scripts": {
    "dev:weapp": "npm run build:weapp -- --watch",
    "build:weapp": "taro build --type weapp",
    "postinstall": "weapp-tw patch"
  },
  "devDependencies": {
    "weapp-tailwindcss": "^4.9.1",
    "tailwindcss": "^3.0.0"
  }
}
```

### uni-app 框架配置

对于 uni-app 项目，配置类似：

```json
{
  "scripts": {
    "dev:mp-weixin": "cross-env NODE_ENV=development UNI_PLATFORM=mp-weixin DEBUG=weapp-tw node ./scripts/run-vue-cli-service.js uni-build --watch",
    "build:mp-weixin": "cross-env NODE_ENV=production UNI_PLATFORM=mp-weixin node ./scripts/run-vue-cli-service.js uni-build",
    "postinstall": "weapp-tw patch"
  },
  "devDependencies": {
    "weapp-tailwindcss": "^4.9.1",
    "tailwindcss": "^3.0.0"
  }
}
```

### 原生小程序配置

对于原生小程序项目，只需在 `package.json` 中添加依赖：

```json
{
  "devDependencies": {
    "weapp-tailwindcss": "^4.9.1",
    "tailwindcss": "^3.0.0"
  },
  "scripts": {
    "postinstall": "weapp-tw patch"
  }
}
```

### 构建工具配置

#### Webpack 配置

在 Webpack 项目中，`weapp-tailwindcss` 会自动集成，无需额外配置。

#### Vite 配置

对于 Vite 项目，确保在 `package.json` 中包含正确的依赖：

```json
{
  "devDependencies": {
    "@tailwindcss/vite": "^4.1.18",
    "weapp-tailwindcss": "^4.9.1"
  }
}
```

**本文档来源**
- [demo/taro-app/package.json](file://demo/taro-app/package.json#L6-L34)
- [demo/uni-app/package.json](file://demo/uni-app/package.json#L5-L52)
- [demo/native/package.json](file://demo/native/package.json#L6-L9)
- [templates/taro-vite-tailwindcss-v4/package.json](file://templates/taro-vite-tailwindcss-v4/package.json#L24-L45)
- [templates/uni-app-tailwindcss-v4/package.json](file://templates/uni-app-tailwindcss-v4/package.json#L4-L40)

## Hello World 示例

创建一个使用 Tailwind CSS 的小程序页面：

1. 创建页面目录：`mkdir -p pages/index`
2. 创建 WXML 文件：`pages/index/index.wxml`
3. 创建 JSON 配置：`pages/index/index.json`
4. 创建 JS 文件：`pages/index/index.js`
5. 创建 WXSS 文件：`pages/index/index.wxss`

### WXML 文件 (pages/index/index.wxml)

```xml
<view class="flex min-h-screen flex-col items-center justify-center bg-gray-100">
  <view class="rounded-xl bg-white p-8 shadow-lg">
    <text class="mb-4 block text-center text-2xl font-bold text-gray-800">Hello World</text>
    <text class="text-center text-gray-600">欢迎使用 weapp-tailwindcss</text>
  </view>
</view>
```

### JSON 配置 (pages/index/index.json)

```json
{
  "usingComponents": {}
}
```

### JS 文件 (pages/index/index.js)

```javascript
Page({
  data: {
    motto: 'Hello World'
  }
})
```

### 页面路由配置 (app.json)

```json
{
  "pages": [
    "pages/index/index"
  ],
  "window": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "Hello World",
    "navigationBarBackgroundColor": "#ffffff"
  }
}
```

**本文档来源**
- [demo/native/app.json](file://demo/native/app.json#L1-L16)
- [demo/native/pages/index/index.json](file://demo/native/pages/index/index.json#L1-L4)
- [demo/native/pages/index/index.wxml](file://demo/native/pages/index/index.wxml#L1-L28)

## 配置文件设置

### tailwind.config.js 基本配置

创建 `tailwind.config.js` 文件，这是 Tailwind CSS 的核心配置文件：

```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './public/index.html',
    './src/**/*.{wxml,html,js,ts,jsx,tsx,vue}'
  ],
  darkMode: 'class',
  theme: {
    extend: {}
  },
  plugins: [],
  corePlugins: {
    preflight: false,
    container: false
  }
}
```

关键配置说明：
- `content`: 指定需要扫描的文件路径，确保包含所有使用 Tailwind 类名的文件
- `darkMode`: 设置暗色模式切换方式，可选 'class' 或 'media'
- `corePlugins`: 禁用 preflight 和 container，因为小程序不需要这些 H5 特有的功能

### postcss.config.js 配置

创建 `postcss.config.js` 文件：

```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
```

**本文档来源**
- [demo/taro-app/tailwind.config.js](file://demo/taro-app/tailwind.config.js#L1-L20)
- [demo/uni-app/tailwind.config.js](file://demo/uni-app/tailwind.config.js#L1-L37)
- [packages/init/src/index.ts](file://packages/init/src/index.ts#L51-L62)

## 常见问题解决方案

### 安装失败

如果安装过程中出现权限错误，请尝试：

```bash
# 使用 --unsafe-perm 参数
npm install -g weapp-tailwindcss --unsafe-perm

# 或者使用 sudo（macOS/Linux）
sudo npm install -g weapp-tailwindcss
```

### 命令未找到

如果安装后命令无法识别，请检查：

1. 确认全局安装路径是否在系统 PATH 中
2. 尝试重新安装
3. 检查 npm 全局安装目录：

```bash
# 查看全局安装路径
npm config get prefix

# 确保该路径在系统 PATH 环境变量中
```

### 构建失败

如果构建过程中出现错误，请检查：

1. 确保 Node.js 版本满足要求（>=16.6.0）
2. 确认 `postinstall` 脚本已正确添加
3. 检查 `tailwind.config.js` 中的 `content` 配置是否正确

### 样式不生效

如果 Tailwind 样式没有生效，请检查：

1. 确认 `content` 配置是否包含了使用类名的文件
2. 检查文件路径是否正确
3. 确认 `preflight` 是否已禁用

**本文档来源**
- [README.md](file://README.md#L63)
- [packages/weapp-tailwindcss/package.json](file://packages/weapp-tailwindcss/package.json#L159)

## 总结

通过本指南，您已经学会了如何快速设置 `weapp-tailwindcss` 项目。从安装 CLI 工具到创建第一个 "Hello World" 页面，整个过程简单高效。无论您是使用 Taro、uni-app 还是原生小程序开发，`weapp-tailwindcss` 都能为您提供一致的 Tailwind CSS 体验。

记住关键步骤：
1. 安装 CLI 工具
2. 初始化项目
3. 配置 `tailwind.config.js`
4. 在页面中使用 Tailwind 类名

现在您可以开始使用 Tailwind CSS 快速构建美观的小程序界面了！