# 框架集成指南

<cite>
**本文档中引用的文件**  
- [taro-webpack-tailwindcss-v4/package.json](file://apps/taro-webpack-tailwindcss-v4/package.json)
- [taro-webpack-tailwindcss-v4/config/index.ts](file://apps/taro-webpack-tailwindcss-v4/config/index.ts)
- [taro-webpack-tailwindcss-v4/postcss.config.mjs](file://apps/taro-webpack-tailwindcss-v4/postcss.config.mjs)
- [uni-app-x-hbuilderx-tailwindcss3/package.json](file://apps/uni-app-x-hbuilderx-tailwindcss3/package.json)
- [uni-app-x-hbuilderx-tailwindcss3/tailwind.config.js](file://apps/uni-app-x-hbuilderx-tailwindcss3/tailwind.config.js)
- [uni-app-x-hbuilderx-tailwindcss4/package.json](file://apps/uni-app-x-hbuilderx-tailwindcss4/package.json)
- [react-app/package.json](file://apps/react-app/package.json)
- [react-app/vite.config.ts](file://apps/react-app/vite.config.ts)
- [vue-app/package.json](file://apps/vue-app/package.json)
- [vue-app/vite.config.ts](file://apps/vue-app/vite.config.ts)
- [vite-native/package.json](file://apps/vite-native/package.json)
- [vite-native/postcss.config.js](file://apps/vite-native/postcss.config.js)
- [vite-native/tailwind.config.js](file://apps/vite-native/tailwind.config.js)
- [vite-native-ts/package.json](file://apps/vite-native-ts/package.json)
</cite>

## 目录
1. [Taro框架集成指南](#taro框架集成指南)
2. [uni-app框架集成指南](#uni-app框架集成指南)
3. [React框架原生集成方案](#react框架原生集成方案)
4. [Vue框架原生集成方案](#vue框架原生集成方案)
5. [原生小程序开发支持](#原生小程序开发支持)

## Taro框架集成指南

本指南详细说明如何在Taro项目中集成Tailwind CSS，以`apps/taro-webpack-tailwindcss-v4`项目为例。

### 项目初始化
使用Taro CLI创建新项目时，选择React或Vue框架，并启用TypeScript支持。示例项目已包含完整的配置结构。

### 依赖安装
在`package.json`中添加必要的依赖：
- 核心依赖：`tailwindcss`、`@tailwindcss/postcss`
- Taro插件：`weapp-tailwindcss`
- 构建工具：`postcss`、`webpack`

```json
{
  "dependencies": {
    "tailwindcss": "catalog:tailwindcss4",
    "@tailwindcss/postcss": "catalog:tailwindcss4"
  },
  "devDependencies": {
    "weapp-tailwindcss": "workspace:*"
  }
}
```

### 配置`config/index.ts`
在Taro配置文件中集成Tailwind CSS插件：

```ts
import { UnifiedWebpackPluginV5 } from 'weapp-tailwindcss/webpack'

// 在mini.webpackChain中添加插件
chain.merge({
  plugin: {
    install: {
      plugin: UnifiedWebpackPluginV5,
      args: [{
        rem2rpx: true,
        tailwindcss: {
          version: 4,
          v4: {
            cssEntries: [
              path.resolve(__dirname, '../src/app.css')
            ]
          }
        }
      }]
    }
  }
})
```

### 多端兼容性处理
通过`postinstall`脚本自动应用补丁：
```json
{
  "scripts": {
    "postinstall": "weapp-tw patch"
  }
}
```

构建脚本支持多端输出：
```json
{
  "scripts": {
    "build:weapp": "taro build --type weapp",
    "build:h5": "taro build --type h5",
    "build:alipay": "taro build --type alipay"
  }
}
```

### 常见问题排查
- 确保`postcss.config.mjs`正确配置：
```js
export default {
  plugins: {
    '@tailwindcss/postcss': {}
  }
}
```
- 检查`content`配置是否包含所有需要扫描的文件路径
- 构建失败时运行`weapp-tw patch`手动修复依赖

**Section sources**
- [taro-webpack-tailwindcss-v4/package.json](file://apps/taro-webpack-tailwindcss-v4/package.json)
- [taro-webpack-tailwindcss-v4/config/index.ts](file://apps/taro-webpack-tailwindcss-v4/config/index.ts)
- [taro-webpack-tailwindcss-v4/postcss.config.mjs](file://apps/taro-webpack-tailwindcss-v4/postcss.config.mjs)

## uni-app框架集成指南

本指南涵盖uni-app在H5、小程序、App等多端的配置差异。

### H5端配置
H5端可以直接使用标准的Tailwind CSS配置，无需特殊处理。确保`postcss`插件正确加载。

### 小程序端配置
小程序端需要禁用`preflight`和`container`核心插件：

```js
corePlugins: {
  preflight: false,
  container: false
}
```

### App端配置（uni-app x）
对于uni-app x项目，使用特定的文件扩展名：

```js
content: [
  './pages/**/*.{uts,uvue}'
]
```

### 依赖安装
根据Tailwind CSS版本选择相应依赖：

**Tailwind CSS v3:**
```json
{
  "devDependencies": {
    "tailwindcss": "catalog:tailwindcss3",
    "weapp-tailwindcss": "workspace:*"
  }
}
```

**Tailwind CSS v4:**
```json
{
  "devDependencies": {
    "tailwindcss": "catalog:tailwindcss4",
    "@tailwindcss/postcss": "catalog:tailwindcss4",
    "weapp-tailwindcss": "workspace:*"
  }
}
```

### 构建脚本
uni-app x项目使用专用提取脚本：
```json
{
  "scripts": {
    "extract": "tw-patch extract"
  }
}
```

### 常见问题排查
- 确保`content`配置包含正确的文件扩展名
- 检查`preflight`是否已禁用以避免样式冲突
- 运行`tw-patch extract`确保样式正确提取

**Section sources**
- [uni-app-x-hbuilderx-tailwindcss3/package.json](file://apps/uni-app-x-hbuilderx-tailwindcss3/package.json)
- [uni-app-x-hbuilderx-tailwindcss3/tailwind.config.js](file://apps/uni-app-x-hbuilderx-tailwindcss3/tailwind.config.js)
- [uni-app-x-hbuilderx-tailwindcss4/package.json](file://apps/uni-app-x-hbuilderx-tailwindcss4/package.json)

## React框架原生集成方案

本指南说明如何在React项目中使用Tailwind类名。

### 项目初始化
使用Vite创建React项目，选择TypeScript模板。

### 依赖安装
```json
{
  "dependencies": {
    "react": "catalog:react19",
    "react-dom": "catalog:react19",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {
    "@tailwindcss/vite": "^4.1.18",
    "tailwindcss": "^4.1.18"
  }
}
```

### 配置文件设置
在`vite.config.ts`中添加Tailwind插件：

```ts
import tailwindcss from "@tailwindcss/vite"

export default defineConfig({
  plugins: [
    react(),
    tailwindcss()
  ]
})
```

### 构建脚本调整
标准构建脚本：
```json
{
  "scripts": {
    "dev": "vite --host",
    "build": "tsc -b && vite build"
  }
}
```

### 组件中使用Tailwind类名
直接在JSX中使用Tailwind类名：
```jsx
<div className="flex items-center justify-between p-4 bg-white rounded-lg shadow">
  <h2 className="text-lg font-medium text-gray-900">标题</h2>
  <button className="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
    按钮
  </button>
</div>
```

### 常见问题排查
- 确保`@tailwindcss/vite`正确安装
- 检查Vite插件顺序
- 验证TypeScript配置

**Section sources**
- [react-app/package.json](file://apps/react-app/package.json)
- [react-app/vite.config.ts](file://apps/react-app/vite.config.ts)

## Vue框架原生集成方案

本指南说明如何在Vue项目中使用Tailwind类名。

### 项目初始化
使用Vite创建Vue项目，选择Vue 3和TypeScript模板。

### 依赖安装
```json
{
  "dependencies": {
    "vue": "catalog:vue3",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^6.0.3",
    "@tailwindcss/postcss": "catalog:tailwindcss4",
    "tailwindcss": "catalog:tailwindcss4"
  }
}
```

### 配置文件设置
在`vite.config.ts`中配置Vue插件：

```ts
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  }
})
```

### 构建脚本调整
标准构建脚本：
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc -b && vite build"
  }
}
```

### 组件中使用Tailwind类名
直接在模板中使用Tailwind类名：
```vue
<template>
  <div class="flex flex-col p-6 bg-white rounded-xl shadow-sm">
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Vue组件</h3>
    <p class="text-gray-600 mb-6">使用Tailwind CSS构建现代化UI</p>
    <button class="self-start px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200">
      点击操作
    </button>
  </div>
</template>
```

### 常见问题排查
- 确保`@tailwindcss/postcss`正确配置
- 检查Vue插件是否在Vite配置中正确注册
- 验证TypeScript和Vue类型定义

**Section sources**
- [vue-app/package.json](file://apps/vue-app/package.json)
- [vue-app/vite.config.ts](file://apps/vue-app/vite.config.ts)

## 原生小程序开发支持

本指南为原生小程序开发提供Tailwind CSS支持。

### 项目初始化
使用`weapp-vite`工具初始化项目：
```bash
npm create weapp-vite@latest
```

### 依赖安装
```json
{
  "devDependencies": {
    "@tailwindcss/postcss": "catalog:tailwindcss4",
    "@tailwindcss/vite": "catalog:tailwindcss4",
    "weapp-tailwindcss": "workspace:*",
    "weapp-vite": "catalog:weappVite"
  }
}
```

### 配置文件设置
`tailwind.config.js`基础配置：
```js
export default {
  content: ['./pages/**/*.{wxml,html,js,ts}'],
  corePlugins: {
    preflight: false,
    container: false
  }
}
```

`postcss.config.js`配置：
```js
export default {
  plugins: {
    '@tailwindcss/postcss': {}
  }
}
```

### 构建脚本调整
使用`weapp-vite`专用脚本：
```json
{
  "scripts": {
    "dev": "weapp-vite dev",
    "build": "weapp-vite build",
    "postinstall": "weapp-tw patch"
  }
}
```

### 常见问题排查
- 确保`postinstall`脚本运行以应用补丁
- 检查`content`配置是否包含所有WXML文件
- 验证`preflight`已禁用避免样式冲突
- 构建失败时手动运行`weapp-tw patch`

**Section sources**
- [vite-native/package.json](file://apps/vite-native/package.json)
- [vite-native/postcss.config.js](file://apps/vite-native/postcss.config.js)
- [vite-native/tailwind.config.js](file://apps/vite-native/tailwind.config.js)
- [vite-native-ts/package.json](file://apps/vite-native-ts/package.json)