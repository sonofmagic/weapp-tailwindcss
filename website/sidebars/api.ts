import type { SidebarConfig } from './types'
import fs from 'node:fs'
import path from 'node:path'
import process from 'node:process'

const otherInterfaceItemsPathCandidates = [
  path.resolve(process.cwd(), 'docs', 'api', 'other-interfaces.items.json'),
  path.resolve(process.cwd(), 'website', 'docs', 'api', 'other-interfaces.items.json'),
]
const otherInterfaceItemsPath = otherInterfaceItemsPathCandidates.find(fs.existsSync)
const otherInterfaceItems = otherInterfaceItemsPath
  ? JSON.parse(fs.readFileSync(otherInterfaceItemsPath, 'utf8'))
  : []

/**
 * @description æ–°ç‰ˆæœ¬é…ç½®é¡¹
 */
const API: SidebarConfig = [
  {
    type: 'category',
    label: 'é…ç½®é¡¹',
    link: {
      type: 'doc',
      id: 'api/interfaces/UserDefinedOptions',
    },
    items: [
      {
        type: 'autogenerated',
        dirName: 'api/options',
      },
      {
        type: 'category',
        label: 'ğŸ—‚ï¸ å…¶ä»–æ¥å£',
        link: {
          type: 'doc',
          id: 'api/other-interfaces',
        },
        collapsed: false,
        items: otherInterfaceItems,
      },
    ],
  },
]

export default API
