---
id: variants-v3
title: '@weapp-tailwindcss/variants-v3'
description: '面向 Tailwind v3 的小程序变体运行时，基于 tailwind-variant-v3 与 merge-v3。'
---

`@weapp-tailwindcss/variants-v3` 是 `tailwind-variant-v3` 的小程序封装，内置 `@weapp-tailwindcss/merge-v3`，自动完成 escape/unescape 与类名合并。适用于 `tailwindcss@3` 项目。

## 安装

```bash npm2yarn
pnpm add @weapp-tailwindcss/variants-v3
```

## tv：变体工厂

```ts
import { tv } from '@weapp-tailwindcss/variants-v3'

const tag = tv({
  base: 'inline-flex items-center rounded-full px-2 text-xs font-medium',
  variants: {
    tone: {
      neutral: 'bg-[#F4F4F5] text-[#18181B]',
      success: 'bg-[#DCFCE7] text-[#166534]',
    },
  },
  defaultVariants: {
    tone: 'neutral',
  },
})

tag({ tone: 'success' }) // => 已转义类名
```

## cn / createTV

```ts
import { cn, createTV } from '@weapp-tailwindcss/variants-v3'

const mergeLater = cn('text-[#ececec]', isActive && 'text-[#ECECEC]')
mergeLater() // => 合并 + escape

const tvBase = createTV({ twMerge: false })
```

## 小程序 + Web

```ts
import { create } from '@weapp-tailwindcss/variants-v3'

// 跨平台框架请自行判断是否为 H5 构建，通常可从环境变量读取。
const isH5 = true
const { tv } = create({
  escape: !isH5,
  unescape: !isH5,
})

const card = tv({
  base: 'rounded-xl border border-[#E2E8F0] bg-white',
})
```

## Demo：复用同一配置

```ts
import { tv, create } from '@weapp-tailwindcss/variants-v3'

const config = {
  base: 'inline-flex items-center rounded-md px-3 py-2 text-sm font-medium',
  variants: {
    tone: {
      primary: 'bg-[#2563EB] text-white',
      danger: 'bg-[#DC2626] text-white',
    },
  },
  defaultVariants: {
    tone: 'primary',
  },
}

const button = tv(config)
// 跨平台框架请自行判断是否为 H5 构建，通常可从环境变量读取。
const isH5 = true
const { tv: tvRuntime } = create({ escape: !isH5, unescape: !isH5 })
const buttonWeb = tvRuntime(config)
```

## 默认 twMerge 配置

```ts
import { create } from '@weapp-tailwindcss/variants-v3'

const { cn, tv } = create({
  twMergeConfig: {
    extend: {
      classGroups: {
        'font-size': [{ text: ['20', '22', '24', '26', '28', '30', '32'] }],
      },
    },
  },
})

cn('text-32', 'text-surface-700')()
tv({ base: 'text-32 text-surface-700' })()
```

## 常见注意事项

- **Tailwind v4**：请改用 [`@weapp-tailwindcss/variants`](./variants)。
- **Web-only 项目**：可直接使用 `tailwind-variant-v3`。
