import Patch from './patch.mdx'

# Mpx

## å®‰è£…

```bash npm2yarn
npm install -D tailwindcss @tailwindcss/postcss postcss weapp-tailwindcss
```

<Patch />

## é…ç½®

æ›´æ”¹ `mpx.config.js` æ³¨å†Œ `weapp-tailwindcss`

```js title="mpx.config.js"
const { defineConfig } = require('@vue/cli-service')
const { UnifiedWebpackPluginV5 } = require('weapp-tailwindcss/webpack')
const path = require('node:path')
module.exports = defineConfig({
  outputDir: `dist/${process.env.MPX_CURRENT_TARGET_MODE}`,
  pluginOptions: {
    mpx: {
      plugin: {
        srcMode: 'wx',
        hackResolveBuildDependencies: ({ files, resolveDependencies }) => {
          const path = require('path')
          const packageJSONPath = path.resolve('package.json')
          if (files.has(packageJSONPath)) files.delete(packageJSONPath)
          if (resolveDependencies.files.has(packageJSONPath)) {
            resolveDependencies.files.delete(packageJSONPath)
          }
        }
      },
      loader: {}
    }
  },
  configureWebpack(config) {
    // æ·»åŠ çš„ä»£ç åœ¨è¿™é‡Œ
    // highlight-start
    config.plugins.push(
      new UnifiedWebpackPluginV5({
        rem2rpx: true,
        cssEntries: [
          // ä½  @import "weapp-tailwindcss"; é‚£ä¸ªæ–‡ä»¶ç»å¯¹è·¯å¾„
          path.resolve(__dirname, './src/app.css'),
        ],
      })
    )
    // highlight-end
  }
})
```

> tailwindcss@4 å¿…é¡»é…ç½® `cssEntries` å¹¶ä¸”ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå¦åˆ™ `tailwindcss` ç”Ÿæˆçš„ç±»åä¸ä¼šå‚ä¸è½¬è¯‘ã€‚

æ·»åŠ  `postcss.config.js` æ³¨å†Œ `@tailwindcss/postcss`

```js title="postcss.config.js"
module.exports = {
  plugins: [
    require('@tailwindcss/postcss')()
  ]
}
```


## æ·»åŠ æ ·å¼

åœ¨ `src/app.css` ä¸­å¼•å…¥ `weapp-tailwindcss`ï¼š

```css title="src/app.css"
@import "weapp-tailwindcss";
```

> ğŸ’¡ å¦‚æœä½ å¸Œæœ›åœ¨ä»»æ„æ ·å¼æ–‡ä»¶ä¸­ç›´æ¥å¼•ç”¨åŒ…å†…æ ·å¼ï¼Œè¯·ä½¿ç”¨ `@import "weapp-tailwindcss/index.css";`ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ `postcss-import` è§£æåˆ°çš„æ˜¯çœŸå®çš„ CSS èµ„æºï¼Œé¿å…å‡ºç° â€œUnknown word "use strict"â€ è¿™ä¸€ç±»ç”±äºè¯¯è§£æåˆ° JS æ–‡ä»¶å¯¼è‡´çš„æ„å»ºæŠ¥é”™ã€‚

ç„¶ååœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œå°ç¨‹åºå…¨å±€çš„ `app.mpx` ä¸­ï¼Œé€šè¿‡ `@import` å¼•å…¥è¯¥æ–‡ä»¶ï¼š

```vue title="app.mpx"
<style lang="css">
@import "./app.css";
</style>
```


æ›´æ”¹å¥½é…ç½®ä¹‹åï¼Œç›´æ¥å¯åŠ¨å³å¯


## å‚è€ƒæ¨¡ç‰ˆ

https://github.com/icebreaker-template/mpx-tailwindcss-v4
